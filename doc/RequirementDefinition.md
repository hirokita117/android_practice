# 日記帳アプリ要件定義書

## プロジェクト概要
- アプリ名：「MyDiary」
- 目的：日々の出来事や感情を簡単に記録・管理できるシンプルな日記アプリ
- ターゲット：日記習慣を身につけたい20-30代

## 機能要件
### 必須機能
- 日記エントリーの作成・編集・削除
- 日付ごとの管理
- テキスト入力
- カレンダー表示による日記の閲覧

### 重要機能
- 気分/天気タグ付け
- ログイン機能
  - 理由：他人にアプリを開かれても閲覧できないようにするため
  - 仕様：PIN入力方式（4桁数字）
  - 保存：ローカル認証のみ（外部認証サーバーは不要）

### あれば良い機能
- 検索機能
- バックアップ/復元
- テーマ切替

## データモデル
### 日記エントリー
- id: Long (主キー)
- date: LocalDate (日記の日付)
- title: String (タイトル、最大50文字)
- content: String (本文、最大5000文字)
- mood: Enum {HAPPY, NORMAL, SAD, ANGRY, EXCITED} (気分タグ)
- weather: Enum {SUNNY, CLOUDY, RAINY, SNOWY} (天気タグ)
- createdAt: LocalDateTime (作成日時)
- updatedAt: LocalDateTime (更新日時)

### ユーザー設定
- pinCode: String (暗号化して保存、初期値はなし)
- theme: Enum {LIGHT, DARK, SYSTEM} (初期値はSYSTEM)

## ユースケースシナリオ
### UC1: 初回起動〜PIN設定
1. ユーザーが初めてアプリを起動
2. ウェルカム画面表示
3. PINコード設定画面に遷移
4. ユーザーが4桁PINを入力・確認
5. メイン画面（カレンダー）に遷移

### UC2: 日記の作成
1. カレンダー画面で日付をタップ
2. 新規エントリー画面に遷移
3. タイトル・本文を入力
4. 気分・天気を選択
5. 保存ボタンをタップ
6. カレンダー画面に戻る（選択した日付の表示に更新）

### UC3: 日記の編集
1. カレンダー画面で日記のある日付をタップ
2. 日記詳細画面が表示
3. 編集ボタンをタップ
4. 編集画面に遷移
5. 内容を編集
6. 保存ボタンをタップ
7. 詳細画面に戻る（更新された内容で表示）

## UI/UX要件
### 画面構成
- スプラッシュ画面
- PIN入力画面
- カレンダー画面（メイン）
- 日記詳細画面
- 編集画面
- 設定画面

### UI詳細
#### カレンダー画面
- 月別カレンダー表示
- 日記があるの日はマーク表示
- 気分に応じた色分け（任意）
- 右下にFAB（新規作成ボタン）
- 上部にメニューアイコン（設定画面へ）

#### 編集画面
- タイトル入力フィールド
- 本文入力エリア（複数行）
- 気分選択（アイコン表示）
- 天気選択（アイコン表示）
- 保存/キャンセルボタン

## エラーハンドリング
- PIN認証失敗：3回失敗で30秒間入力不可
- データ保存失敗：自動リトライ（最大3回）+ エラーメッセージ
- メモリ不足：軽量モードに自動切替 + 通知

## 技術要件
- [doc/TECH_STACK.md](./TECH_STACK.md) に記載

## 非機能要件
- 起動時間：2秒以内
- データ保存：ローカルストレージ
- プライバシー保護：PINコードによるロック
- オフライン動作：すべての機能がオフラインで動作可能
- レスポンス時間：UI操作からの反応は100ms以内

## 制約条件
- [doc/TECH_STACK.md](./TECH_STACK.md) に記載
- オフライン動作可能
- ストレージ使用量：最大100MB

## テスト要件
### 単体テスト
- データベース操作の検証
- PIN認証ロジックの検証

### UI/UXテスト
- 各画面の表示検証
- 異なる端末サイズでの表示確認
- 画面遷移の検証

### パフォーマンステスト
- 100件の日記データ入力時の動作検証
- メモリ使用量の検証

## 補足資料
- [doc/TECH_STACK.md](./TECH_STACK.md): 技術スタックの詳細
